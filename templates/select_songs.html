<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select Songs</title>
</head>
<body>
    <h1>Select Songs to Add to Your Playlist</h1>
   <form action="/finalize_playlist" method="POST">
    <!-- Hidden field for determining if it is an update -->
    <input type="hidden" name="is_update" value="{{ is_update }}">

    {% if is_update == 'true' %}
        <!-- Pass the playlist ID when updating an existing playlist -->
        <input type="hidden" name="playlist_id" value="{{ playlist_id }}">
    {% else %}
        <!-- Playlist name input for creating a new playlist -->
        <label for="playlist_name">Playlist Name:</label>
        <input type="text" id="playlist_name" name="playlist_name" required>
    {% endif %}

    <!-- Display the search results for the user to select songs -->
    {% for song, tracks in search_results.items() %}
        <h3>{{ song }}</h3>
        {% for track in tracks %}
            <input type="checkbox" name="selected_tracks" value="{{ track['uri'] }}">
            {{ track['name'] }} by {{ track['artists'][0]['name'] }}<br>
        {% endfor %}
    {% endfor %}

    <button type="submit">Finalize Playlist</button>
</form>

</form>
</body>
</html>
